<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>内容编辑器 | 思维空间CMS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Monaco Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <!-- TinyMCE富文本编辑器 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/6.7.0/tinymce.min.js"></script>
    <!-- SweetAlert2 弹窗库 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            /* 主色调 */
            --primary-50: #f0f4ff;
            --primary-100: #dbe8fe;
            --primary-200: #bfd7fe;
            --primary-300: #93bbfd;
            --primary-400: #6094fa;
            --primary-500: #3b76f6;
            --primary-600: #2563eb;
            --primary-700: #1d4ed8;
            --primary-800: #1e40af;
            --primary-900: #1e3a8a;
            
            /* 中性色 */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* 功能色 */
            --success-500: #10b981;
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
            --info-500: #3b82f6;
            
            /* 应用变量 */
            --primary-color: var(--primary-600);
            --secondary-color: var(--primary-800);
            --accent-color: #4cc9f0;
            --text-color: var(--gray-800);
            --light-text: var(--gray-500);
            --bg-color: var(--gray-50);
            --card-bg: #ffffff;
            --sidebar-bg: var(--gray-900);
            --sidebar-text: #edf2f4;
            --border-radius: 8px;
            --box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            --border-color: var(--gray-200);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* 暗色模式变量 */
            --dark-bg-color: var(--gray-900);
            --dark-card-bg: var(--gray-800);
            --dark-text-color: var(--gray-100);
            --dark-border-color: var(--gray-700);
        }
        
        /* 暗色模式 */
        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: var(--dark-text-color);
                --bg-color: var(--dark-bg-color);
                --card-bg: var(--dark-card-bg);
                --border-color: var(--dark-border-color);
                --box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Noto Sans SC', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }
        
        /* 侧边栏样式 */
        .admin-sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 1.5rem 0;
            height: 100vh;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-right: 1px solid rgba(255,255,255,0.1);
            transition: width 0.3s ease;
        }
        
        .admin-logo {
            font-size: 1.5rem;
            font-weight: 700;
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 1.5rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .admin-logo i {
            font-size: 1.8rem;
            color: var(--accent-color);
        }
        
        .admin-menu {
            list-style: none;
            padding: 0 0.5rem;
        }
        
        .menu-category {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0.75rem 1rem;
            color: rgba(255,255,255,0.6);
            margin-top: 1rem;
        }
        
        .menu-item {
            padding: 0.5rem 1rem;
            transition: var(--transition);
            border-radius: var(--border-radius);
            margin: 0.25rem 0;
        }
        
        .menu-item a {
            color: var(--sidebar-text);
            text-decoration: none;
            display: flex;
            align-items: center;
            opacity: 0.8;
            font-size: 0.95rem;
            gap: 0.75rem;
        }
        
        .menu-item a:hover, .menu-item.active a {
            opacity: 1;
        }
        
        .menu-item i {
            width: 24px;
            text-align: center;
            font-size: 1rem;
        }
        
        .menu-item.active {
            background-color: rgba(255,255,255,0.1);
            border-left: 3px solid var(--accent-color);
        }
        
        .menu-item:hover:not(.active) {
            background-color: rgba(255,255,255,0.05);
        }
        
        /* 主内容区 */
        .admin-main {
            flex: 1;
            padding: 1.5rem;
            max-width: calc(100vw - 280px);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        /* 顶部导航栏 */
        .top-navbar {
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 0.75rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.1rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .back-btn:hover {
            background: var(--primary-50);
            color: var(--primary-600);
        }
        
        .page-title {
            font-size: 1.25rem;
            color: var(--primary-700);
            font-weight: 600;
        }
        
        .nav-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }
        
        /* 按钮设计 */
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.85rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            line-height: 1;
        }
        
        .btn-primary {
            background: var(--primary-600);
            color: white;
            box-shadow: 0 2px 4px rgba(67, 97, 238, 0.2);
        }
        
        .btn-primary:hover {
            background: var(--primary-700);
            box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }
        
        .btn-outline:hover {
            background: var(--bg-color);
            border-color: var(--primary-300);
            color: var(--primary-600);
        }
        
        /* 配置卡片 - 紧凑设计 */
        .config-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--border-color);
            padding: 1rem;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-700);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .card-title i {
            color: var(--primary-500);
            font-size: 1rem;
        }
        
        /* 表单设计 - 紧凑布局 */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .form-section {
            margin-bottom: 1rem;
        }
        
        .form-section-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-section-title i {
            color: var(--primary-500);
            font-size: 0.95rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-row {
            display: flex;
            gap: 0.75rem;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0.75rem;
        }
        
        .form-label {
            display: block;
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 0.25rem;
            font-size: 0.85rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 0.85rem;
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .form-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        /* 标签输入 */
        .tag-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            min-height: 2.5rem;
            align-items: center;
            background: var(--card-bg);
        }
        
        .tag {
            background: var(--primary-600);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }
        
        .tag:hover {
            background: var(--primary-700);
        }
        
        .tag-remove {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.65rem;
            opacity: 0.7;
            transition: var(--transition);
        }
        
        .tag-remove:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .tag-input {
            border: none;
            outline: none;
            flex: 1;
            min-width: 100px;
            padding: 0.25rem;
            background: transparent;
            color: var(--text-color);
            font-size: 0.85rem;
        }
        
        /* 内容类型选择器 */
        .content-type-tabs {
            display: flex;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }
        
        .content-type-tab {
            flex: 1;
            padding: 0.5rem 0.75rem;
            border: none;
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .content-type-tab.active {
            background: var(--primary-600);
            color: white;
        }
        
        .content-type-tab:not(.active):hover {
            background: var(--primary-50);
            color: var(--primary-600);
        }
        
        /* 编辑器卡片 - 自动扩展 */
        .editor-card {
            flex: 1;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            min-height: 400px;
            max-height: calc(100vh - 300px);
            overflow: hidden;
        }
        
        .editor-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .editor-tabs {
            display: flex;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }
        
        .editor-tab {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }
        
        .editor-tab.active {
            color: var(--primary-600);
            background: var(--card-bg);
        }
        
        .editor-tab:hover:not(.active) {
            color: var(--primary-600);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .editor-body {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .editor-pane {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: none;
            flex-direction: column;
            height: 100%;
        }
        
        .editor-pane.active {
            display: flex;
        }
        
        /* 富文本编辑器 - 自动扩展 */
        .rich-text-editor {
            flex: 1;
            border: none !important;
            min-height: 300px;
        }
        
        /* 移除TinyMCE编辑器的边框 */
        .tox .tox-editor-header {
            border-bottom: none !important;
            padding: 4px 4px 0 !important;
        }
        
        .tox-tinymce {
            border: none !important;
            border-radius: 0 0 var(--border-radius) var(--border-radius) !important;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .tox-editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .tox-sidebar-wrap {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .tox-edit-area {
            flex: 1;
            overflow: auto;
        }
        
        /* 代码编辑器 */
        .code-editor-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .code-editor-toolbar {
            padding: 0.5rem 0.75rem;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-language-select {
            padding: 0.4rem 0.6rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        .code-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .code-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.75rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .code-btn:hover {
            background: var(--bg-color);
            border-color: var(--primary-300);
            color: var(--primary-600);
        }
        
        .monaco-editor-container {
            flex: 1;
            min-height: 300px;
        }
        
        /* 预览区域 */
        .preview-container {
            padding: 1rem;
            background: var(--card-bg);
            height: 100%;
            overflow-y: auto;
        }
        
        .preview-content {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }
        
        .preview-content h1 {
            font-size: 1.8rem;
            margin-bottom: 1.25rem;
            color: var(--text-color);
            font-weight: 700;
            line-height: 1.3;
        }
        
        .preview-content h2 {
            font-size: 1.4rem;
            margin: 1.25rem 0 0.75rem;
            color: var(--text-color);
            font-weight: 600;
        }
        
        .preview-content p {
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            .form-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 1024px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .admin-sidebar {
                width: 72px;
                overflow: hidden;
            }
            
            .admin-sidebar:hover {
                width: 280px;
            }
            
            .admin-logo span {
                display: none;
            }
            
            .admin-sidebar:hover .admin-logo span {
                display: inline;
            }
            
            .menu-category {
                display: none;
            }
            
            .admin-sidebar:hover .menu-category {
                display: block;
            }
            
            .menu-item a span {
                display: none;
            }
            
            .admin-sidebar:hover .menu-item a span {
                display: inline;
            }
            
            .admin-main {
                padding: 1rem;
                max-width: calc(100vw - 72px);
            }
            
            .admin-sidebar:hover ~ .admin-main {
                max-width: calc(100vw - 280px);
            }
            
            .top-navbar {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            .nav-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
        
        @media (max-width: 576px) {
            .admin-sidebar {
                position: fixed;
                bottom: 0;
                top: auto;
                height: auto;
                width: 100%;
                z-index: 1000;
                padding: 0.5rem 0;
                border-top: 1px solid rgba(255,255,255,0.1);
            }
            
            .admin-menu {
                display: flex;
                overflow-x: auto;
                padding: 0 0.5rem;
            }
            
            .menu-item {
                margin: 0;
                padding: 0.5rem;
            }
            
            .menu-item a {
                flex-direction: column;
                font-size: 0.7rem;
                gap: 0.25rem;
            }
            
            .menu-item i {
                font-size: 1rem;
            }
            
            .admin-logo {
                display: none;
            }
            
            .menu-category {
                display: none;
            }
            
            .admin-main {
                padding-bottom: 70px;
                max-width: 100vw;
            }
            
            .editor-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .editor-tabs {
                width: 100%;
            }
            
            .editor-tab {
                flex: 1;
                padding: 0.5rem;
                justify-content: center;
                font-size: 0.75rem;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- 管理侧边栏 -->
    <aside class="admin-sidebar">
        <div class="admin-logo">
            <i class="fas fa-brain"></i>
            <span>思维空间CMS</span>
        </div>
        <ul class="admin-menu">
            <div class="menu-category">内容管理</div>
            <li class="menu-item active"><a href="#"><i class="fas fa-edit"></i> <span>文章编辑</span></a></li>
            <li class="menu-item"><a href="#"><i class="fas fa-folder"></i> <span>分类管理</span></a></li>
            <li class="menu-item"><a href="#"><i class="fas fa-book"></i> <span>教程管理</span></a></li>
            <li class="menu-item"><a href="#"><i class="fas fa-code"></i> <span>函数管理</span></a></li>
            <div class="menu-category">系统管理</div>
            <li class="menu-item"><a href="#"><i class="fas fa-users"></i> <span>用户管理</span></a></li>
            <li class="menu-item"><a href="#"><i class="fas fa-cog"></i> <span>系统设置</span></a></li>
            <div class="menu-category">统计</div>
            <li class="menu-item"><a href="#"><i class="fas fa-chart-line"></i> <span>访问统计</span></a></li>
            <li class="menu-item"><a href="#"><i class="fas fa-comments"></i> <span>评论管理</span></a></li>
        </ul>
    </aside>
    
    <!-- 主内容区 -->
    <main class="admin-main">
        <!-- 顶部导航栏 -->
        <nav class="top-navbar">
            <div class="nav-left">
                <button class="back-btn" onclick="history.back()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 class="page-title">内容编辑器</h1>
            </div>
            <div class="nav-actions">
                <button class="btn btn-outline" onclick="previewContent()">
                    <i class="fas fa-eye"></i>
                    预览
                </button>
                <button class="btn btn-primary" onclick="saveContent()">
                    <i class="fas fa-save"></i>
                    保存文章
                </button>
            </div>
        </nav>
        
        <!-- 配置卡片 - 紧凑设计 -->
        <div class="config-card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-cog"></i>
                    内容配置
                </h2>
            </div>
            
            <div class="form-grid">
                <div class="form-section">
                    <h3 class="form-section-title">
                        <i class="fas fa-info-circle"></i>
                        基本信息
                    </h3>
                    <div class="form-group">
                        <label class="form-label">标题</label>
                        <input type="text" class="form-control" id="title" name="title" placeholder="输入文章标题">
                    </div>
                    <div class="form-group">
                        <label class="form-label">副标题</label>
                        <input type="text" class="form-control" id="article-subtitle" placeholder="可选的副标题">
                    </div>
                    <div class="form-group">
                        <label class="form-label">摘要</label>
                        <textarea class="form-control" id="article-summary" rows="2" placeholder="文章摘要，用于搜索和展示"></textarea>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3 class="form-section-title">
                        <i class="fas fa-tags"></i>
                        分类信息
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">主分类</label>
                            <select class="form-control form-select" id="primary-category">
                                <option value="">选择主分类</option>
                                <option value="basic">基础语法</option>
                                <option value="data-structure">数据结构</option>
                                <option value="advanced">高级特性</option>
                                <option value="projects">项目实战</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">子分类</label>
                            <select class="form-control form-select" id="sub-category">
                                <option value="">选择子分类</option>
                                <option value="variables">变量与数据类型</option>
                                <option value="functions">函数</option>
                                <option value="classes">类与对象</option>
                                <option value="modules">模块与包</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">内容类型</label>
                        <div class="content-type-tabs">
                            <button class="content-type-tab active" data-type="tutorial">
                                <i class="fas fa-graduation-cap"></i>
                                教程
                            </button>
                            <button class="content-type-tab" data-type="structure">
                                <i class="fas fa-sitemap"></i>
                                结构
                            </button>
                            <button class="content-type-tab" data-type="story">
                                <i class="fas fa-book-open"></i>
                                故事
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">标签</label>
                        <div class="tag-input-container" id="tag-container">
                            <input type="text" class="tag-input" placeholder="添加标签，按回车确认" id="tag-input">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 编辑器卡片 - 自动扩展 -->
        <div class="editor-card">
            <div class="editor-header">
                <div class="editor-tabs">
                    <button class="editor-tab active" data-tab="rich-text">
                        <i class="fas fa-edit"></i>
                        富文本编辑
                    </button>
                    <button class="editor-tab" data-tab="code">
                        <i class="fas fa-code"></i>
                        代码编辑
                    </button>
                    <button class="editor-tab" data-tab="preview">
                        <i class="fas fa-eye"></i>
                        预览
                    </button>
                </div>
            </div>
            
            <div class="editor-body">
                <!-- 富文本编辑器 -->
                <div class="editor-pane active" id="rich-text-pane">
                    <textarea id="rich-text-editor" class="rich-text-editor"></textarea>
                </div>
                
                <!-- 代码编辑器 -->
                <div class="editor-pane" id="code-pane">
                    <div class="code-editor-container">
                        <div class="code-editor-toolbar">
                            <div>
                                <label>语言：</label>
                                <select class="code-language-select" id="code-language">
                                    <option value="python">Python</option>
                                    <option value="javascript">JavaScript</option>
                                    <option value="html">HTML</option>
                                    <option value="css">CSS</option>
                                    <option value="sql">SQL</option>
                                    <option value="json">JSON</option>
                                </select>
                            </div>
                            <div class="code-actions">
                                <button class="code-btn" onclick="formatCode()">
                                    <i class="fas fa-magic"></i>
                                    格式化
                                </button>
                                <button class="code-btn" onclick="runCode()">
                                    <i class="fas fa-play"></i>
                                    运行
                                </button>
                                <button class="code-btn" onclick="insertCodeBlock()">
                                    <i class="fas fa-plus"></i>
                                    插入代码块
                                </button>
                            </div>
                        </div>
                        <div class="monaco-editor-container" id="monaco-editor"></div>
                    </div>
                </div>
                
                <!-- 预览面板 -->
                <div class="editor-pane" id="preview-pane">
                    <div class="preview-container">
                        <div class="preview-content" id="preview-content">
                            <h1>文章预览</h1>
                            <p>在这里可以预览您编辑的内容...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // 初始化编辑器
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化富文本编辑器
            tinymce.init({
                selector: '#rich-text-editor',
                plugins: 'code table lists link image media codesample autoresize',
                toolbar: 'undo redo | blocks | bold italic | alignleft aligncenter alignright | indent outdent | bullist numlist | code table link image media codesample',
                min_height: 300,
                autoresize_bottom_margin: 20,
                autoresize_on_init: true,
                skin: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'oxide-dark' : 'oxide',
                content_css: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'default',
                content_style: 'body { margin: 1rem; font-size: 14px; line-height: 1.6; }',
                menubar: false,
                statusbar: false,
                branding: false,
                setup: function(editor) {
                    // 编辑器内容变化时自动滚动到底部
                    editor.on('change', function() {
                        const editorContainer = editor.editorContainer;
                        if (editorContainer) {
                            editorContainer.scrollTop = editorContainer.scrollHeight;
                        }
                    });
                }
            });
            
            // 初始化Monaco编辑器
            require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' }});
            require(['vs/editor/editor.main'], function() {
                window.monacoEditor = monaco.editor.create(document.getElementById('monaco-editor'), {
                    value: '// 在这里编写您的代码\nconsole.log("Hello, World!");',
                    language: 'javascript',
                    theme: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'vs-dark' : 'vs',
                    automaticLayout: true,
                    minimap: { enabled: false },
                    scrollBeyondLastLine: true
                });
                
                // 自动调整编辑器大小
                window.addEventListener('resize', function() {
                    monacoEditor.layout();
                });
            });
            
            // 标签输入功能
            const tagInput = document.getElementById('tag-input');
            const tagContainer = document.getElementById('tag-container');
            
            tagInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && this.value.trim()) {
                    e.preventDefault();
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.innerHTML = `
                        ${this.value.trim()}
                        <button class="tag-remove">&times;</button>
                    `;
                    tagContainer.insertBefore(tag, tagInput);
                    tag.querySelector('.tag-remove').addEventListener('click', function() {
                        tag.remove();
                    });
                    this.value = '';
                }
            });
            
            // 标签页切换功能
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有活动标签
                    document.querySelectorAll('.editor-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.editor-pane').forEach(p => p.classList.remove('active'));
                    
                    // 激活当前标签
                    this.classList.add('active');
                    const paneId = this.getAttribute('data-tab') + '-pane';
                    document.getElementById(paneId).classList.add('active');
                    
                    // 调整编辑器大小
                    if (window.monacoEditor) {
                        setTimeout(() => {
                            monacoEditor.layout();
                        }, 0);
                    }
                });
            });
            
            // 内容类型切换
            document.querySelectorAll('.content-type-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.content-type-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    // 这里可以添加切换内容类型的逻辑
                });
            });
        });
        
        // 预览功能
        function previewContent() {
            const previewContent = document.getElementById('preview-content');
            const title = document.getElementById('title').value || '无标题';
            const content = tinymce.activeEditor.getContent();
            
            previewContent.innerHTML = `
                <h1>${title}</h1>
                ${content || '<p>暂无内容</p>'}
            `;
            
            // 切换到预览标签
            document.querySelector('.editor-tab[data-tab="preview"]').click();
        }
        
        // 保存功能
        function saveContent() {
            Swal.fire({
                title: '保存成功',
                text: '文章已保存到内容列表',
                icon: 'success',
                confirmButtonText: '确定'
            });
        }
        
        // 代码编辑器功能
        function formatCode() {
            monacoEditor.getAction('editor.action.formatDocument').run();
        }
        
        function runCode() {
            // 这里可以添加运行代码的逻辑
            Swal.fire({
                title: '运行代码',
                text: '代码执行功能需要后端支持',
                icon: 'info',
                confirmButtonText: '确定'
            });
        }
        
        function insertCodeBlock() {
            const code = monacoEditor.getValue();
            tinymce.activeEditor.execCommand('mceInsertContent', false, `<pre class="language-${document.getElementById('code-language').value}"><code>${code}</code></pre>`);
            Swal.fire({
                title: '插入成功',
                text: '代码已插入到富文本编辑器中',
                icon: 'success',
                confirmButtonText: '确定'
            });
        }
    </script>
</body>
</html>